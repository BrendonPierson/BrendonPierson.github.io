<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Querying on Biersons</title><link>https://biersons.com/tags/querying/</link><description>Recent content in Querying on Biersons</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 19 Dec 2022 06:45:24 -0500</lastBuildDate><atom:link href="https://biersons.com/tags/querying/index.xml" rel="self" type="application/rss+xml"/><item><title>DISTINCT FROM to compare NULL-able values in Postgres</title><link>https://biersons.com/posts/postgres-distinct-from-and-comparing-potetially-null-values/</link><pubDate>Mon, 19 Dec 2022 06:45:24 -0500</pubDate><guid>https://biersons.com/posts/postgres-distinct-from-and-comparing-potetially-null-values/</guid><description>It turns out I&amp;rsquo;ve been comparing potentially null values in postgres the wrong way for years. Any comparisons will a null value result in null so null &amp;lt;&amp;gt; 3 isn&amp;rsquo;t true it&amp;rsquo;s null. To avoid this I would do something like coalesce(potentially_null_field, 0) &amp;lt;&amp;gt; 3 when I could have instead done potentially_null_field IS DISTINCT FROM 3.
For example I want to find books written by authors from a different country and include results where country is listed on the author or book, but null on the other table.</description></item><item><title>TIL Selecting the last item in a postgres array</title><link>https://biersons.com/posts/til-postgres-last-array-item/</link><pubDate>Mon, 10 Jan 2022 19:39:41 -0500</pubDate><guid>https://biersons.com/posts/til-postgres-last-array-item/</guid><description>To get the last item from a postgres array
SELECT errors[array_upper(errors, 1)] FROM oban.oban_jobs Oban is a great elixir job processing library. It tracks job attempts and errors with a full stack trace in a postgres errors array column. This is great to have but hard to reason about looking at the giant blob. The above snippet let&amp;rsquo;s you limit it to just the most recent error which is really all you care about.</description></item></channel></rss>